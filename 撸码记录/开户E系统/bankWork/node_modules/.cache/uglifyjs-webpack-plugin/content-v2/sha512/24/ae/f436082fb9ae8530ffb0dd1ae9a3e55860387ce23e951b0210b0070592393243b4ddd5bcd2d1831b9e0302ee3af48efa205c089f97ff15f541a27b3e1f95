{"code":"!function(e){var a={};function t(s){if(a[s])return a[s].exports;var i=a[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=a,t.d=function(e,a,s){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:s})},t.r=function(e){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&\"object\"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&a&&\"string\"!=typeof e)for(var i in e)t.d(s,i,function(a){return e[a]}.bind(null,i));return s},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,\"a\",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p=\"/\",t(t.s=0)}([function(e,a,t){e.exports=t(1)},function(module,exports,__webpack_require__){\"use strict\";\n/*BUGME_START*/var __BUGME_START__=1;!function(){var CircularJSON=JSON,replacer=function(e,a){return void 0===a?\"\\xa9undefined\":null===a?\"\\xa9null\":a===-1/0?\"\\xa9- Infinity\":a===1/0?\"\\xa9Infinity\":\"number\"==typeof a&&isNaN(a)?\"\\xa9NaN\":\"function\"==typeof a?\"\\xa9function\":a};try{CircularJSON=eval('(function(JSON,RegExp){var specialChar=\"~\",safeSpecialChar=\"\\\\\\\\x\"+(\"0\"+specialChar.charCodeAt(0).toString(16)).slice(-2),escapedSafeSpecialChar=\"\\\\\\\\\"+safeSpecialChar,specialCharRG=new RegExp(safeSpecialChar,\"g\"),safeSpecialCharRG=new RegExp(escapedSafeSpecialChar,\"g\"),safeStartWithSpecialCharRG=new RegExp(\"(?:^|([^\\\\\\\\\\\\\\\\]))\"+escapedSafeSpecialChar),indexOf=[].indexOf||function(v){for(var i=this.length;i--&&this[i]!==v;);return i},$String=String;function generateReplacer(value,replacer,resolve){var doNotIgnore=false,inspect=!!replacer,path=[],all=[value],seen=[value],mapp=[resolve?specialChar:\"[Circular]\"],last=value,lvl=1,i,fn;if(inspect){fn=typeof replacer===\"object\"?function(key,value){return key!==\"\"&&replacer.indexOf(key)<0?void 0:value}:replacer}return function(key,value){if(inspect)value=fn.call(this,key,value);if(doNotIgnore){if(last!==this){i=lvl-indexOf.call(all,this)-1;lvl-=i;all.splice(lvl,all.length);path.splice(lvl-1,path.length);last=this}if(typeof value===\"object\"&&value){if(indexOf.call(all,value)<0){all.push(last=value)}lvl=all.length;i=indexOf.call(seen,value);if(i<0){i=seen.push(value)-1;if(resolve){path.push((\"\"+key).replace(specialCharRG,safeSpecialChar));mapp[i]=specialChar+path.join(specialChar)}else{mapp[i]=mapp[0]}}else{value=mapp[i]}}else{if(typeof value===\"string\"&&resolve){value=value.replace(safeSpecialChar,escapedSafeSpecialChar).replace(specialChar,safeSpecialChar)}}}else{doNotIgnore=true}return value}}function retrieveFromPath(current,keys){for(var i=0,length=keys.length;i<length;current=current[keys[i++].replace(safeSpecialCharRG,specialChar)]);return current}function generateReviver(reviver){return function(key,value){var isString=typeof value===\"string\";if(isString&&value.charAt(0)===specialChar){return new $String(value.slice(1))}if(key===\"\")value=regenerate(value,value,{});if(isString)value=value.replace(safeStartWithSpecialCharRG,\"$1\"+specialChar).replace(escapedSafeSpecialChar,safeSpecialChar);return reviver?reviver.call(this,key,value):value}}function regenerateArray(root,current,retrieve){for(var i=0,length=current.length;i<length;i++){current[i]=regenerate(root,current[i],retrieve)}return current}function regenerateObject(root,current,retrieve){for(var key in current){if(current.hasOwnProperty(key)){current[key]=regenerate(root,current[key],retrieve)}}return current}function regenerate(root,current,retrieve){return current instanceof Array?regenerateArray(root,current,retrieve):current instanceof $String?current.length?retrieve.hasOwnProperty(current)?retrieve[current]:retrieve[current]=retrieveFromPath(root,current.split(specialChar)):root:current instanceof Object?regenerateObject(root,current,retrieve):current}var CircularJSON={stringify:function stringify(value,replacer,space,doNotResolve){return CircularJSON.parser.stringify(value,generateReplacer(value,replacer,!doNotResolve),space)},parse:function parse(text,reviver){return CircularJSON.parser.parse(text,generateReviver(reviver))},parser:JSON};return CircularJSON})(JSON,RegExp)')}catch(e){console.error(e)}var OriginalFunction=Function,OriginalFetch=self.fetch,OriginalBridgeCall=self.AlipayJSBridge&&self.AlipayJSBridge.call,callInternalAPI=function(e,a){var t={data:{method:e,param:a},action:\"internalAPI\"},s=encodeURIComponent(JSON.stringify(t));OriginalFetch?OriginalFetch(\"https://alipay.kylinBridge/?data=\"+s,{mode:\"no-cors\"}).then(function(){}).catch(function(){}):OriginalBridgeCall(\"internalAPI\",{method:e,param:a})},eventHandler=function(e){try{if(e.fromVConsoleToWorker){var a=e.requestId;if(\"exec\"===e.method)try{new OriginalFunction(\"requestId\",\"sendBack\",\"\\n              const res = \"+e.script+\";\\n              console.log(res);\\n            \")(a,function(e){return callInternalAPI(\"tinyDebugConsole\",{type:\"msgFromWorkerToVConsole\",content:CircularJSON.stringify({requestId:a,returnValue:e},replacer)})})}catch(e){console.error(e.name+\":\"+e.message)}}}catch(e){}};setTimeout(function(){self.document&&self.document.addEventListener(\"push\",function(e){try{eventHandler(JSON.parse(e.data.param.content))}catch(e){}}),self.addEventListener(\"push\",function(e){try{var a=JSON.parse(JSON.parse(e.data.text()).param.data.content);eventHandler(a)}catch(e){}})},10),[\"log\",\"info\",\"error\",\"debug\",\"warn\"].forEach(function(e){var a=\"o\"+e;console[a]||(console[a]=console[e],console[e]=function(){for(var t,s=arguments.length,i=Array(s),r=0;r<s;r++)i[r]=arguments[r];(t=console)[a].apply(t,i);var n=void 0;try{n=CircularJSON.stringify(i.map(function(e){return e instanceof Error?e.name+\": \"+e.message:e}),replacer)}catch(e){return void console.error(e.name+\": \"+e.message)}callInternalAPI(\"tinyDebugConsole\",{content:n,type:\"console_\"+e})})})}();var __BUGME_END__=1;\n/*BUGME_END*/if(!self.__appxInited){var success=function(){__webpack_require__(2),__webpack_require__(3),__webpack_require__(4),__webpack_require__(5),__webpack_require__(6),__webpack_require__(7),__webpack_require__(8)};self.__appxInited=1,__webpack_require__(9),__webpack_require__(11);var AFAppX=self.AFAppX;self.getCurrentPages=AFAppX.getCurrentPages,self.getApp=AFAppX.getApp,self.Page=AFAppX.Page,self.App=AFAppX.App,self.my=AFAppX.bridge||AFAppX.abridge,self.abridge=self.my,self.Component=AFAppX.WorkerComponent||function(){},self.$global=AFAppX.$global,self.bootstrapApp?self.bootstrapApp({success:success}):success()}},function(e,a,t){\"use strict\";App({data:{ip:\"http://106.39.30.137:8080\"},onLaunch:function(e){console.info(\"App onLaunch\")},onShow:function(e){}})},function(e,a,t){\"use strict\";$global.currentPageConfig={pagePath:\"pages/index/index\",usingComponents:{}},Page({data:{effective:\"\",onItemTap:\"handleListItemTap\",header:\"\\u4efb\\u52a1\\u5217\\u8868\",data:[],userid:\"\",src:\"\"},onPullDownRefresh:function(){this.onReady(),dd.stopPullDownRefresh()},onReady:function(){var e=this,a=this,t=void 0,s=void 0;dd.getAuthCode({success:function(e){console.log(\"\\u6388\\u6743\\u7801\"),console.log(e.authCode),t=e.authCode,dd.httpRequest({url:\"https://oapi.dingtalk.com/gettoken?appkey=dinghp1tsd9kg2bvunya&appsecret=OT0YcRixTKkoxK7en7sGEJ3n418K9OOU95tzu5D01LLv3FdFm4W-iKVYUpjXhyR2\",method:\"GET\",headers:{\"content-type\":\"application/json;charset=utf-8\"},dataType:\"json\",success:function(e){console.log(\"\\u83b7\\u53d6access_token\"),console.log(e.data.access_token),s=e.data.access_token,dd.httpRequest({url:getApp().data.ip+\"/app/userLogin?access_token=\"+s+\"&code=\"+t,method:\"GET\",headers:{\"content-type\":\"application/json;charset=utf-8\"},success:function(e){console.log(e);var t=e.data;console.log(\"\\u7528\\u6237\"+t+\"\\u767b\\u9646\\u6210\\u529f\"),a.getRecordList()}})}})}}),setTimeout(function(){e.getRecordList()},1e3)},getRecordList:function(){var e=this;dd.httpRequest({url:getApp().data.ip+\"/center/queryRecord\",method:\"GET\",headers:{\"content-type\":\"application/json;charset=utf-8\"},dataType:\"json\",success:function(a){console.log(\"\\u83b7\\u53d6\\u4efb\\u52a1list\"),console.log(a),e.setData({data:a.data})},fail:function(e){console.log(e)}})},handleListItemTap:function(e){console.log(e),dd.navigateTo({url:\"../service/service?param=edit&id=\"+e.currentTarget.dataset.index+\"&userid=\"+this.data.userid})},delTask:function(e){var a=this;console.log(e.currentTarget.dataset.index),dd.httpRequest({url:getApp().data.ip+\"/center/deleteRecord\",method:\"POST\",data:{recordIds:e.currentTarget.dataset.index},dataType:\"json\",success:function(e){dd.showToast({content:\"\\u5220\\u9664\\u6210\\u529f\"}),a.getRecordList()},fail:function(e){console.log(e)}})},idCardOcr:function(){var e=this;dd.showActionSheet({title:\"\\u9009\\u62e9\",cancelButtonText:\"\\u53d6\\u6d88\",items:[\"\\u8eab\\u4efd\\u8bc1\\u6b63\\u9762\",\"\\u8eab\\u4efd\\u8bc1\\u53cd\\u9762\"],success:function(a){var t=a.index;0==t&&e.uploadSelfImage(),1==t&&e.uploadSelfBackImage()}})},uploadSelfImage:function(){var e=this;dd.chooseImage({sourceType:[\"camera\",\"album\"],count:1,success:function(a){dd.showLoading({content:\"OCR\\u626b\\u63cf\\u4e2d...\"}),e.setData({src:a.filePaths[0]});var t=a.filePaths&&a.filePaths[0]||a.apFilePaths&&a.apFilePaths[0];console.log(t),dd.uploadFile({url:getApp().data.ip+\"/upload/cardOcr?cardFace=id-card-front\",fileType:\"image\",fileName:\"file\",filePath:t,success:function(a){dd.hideLoading();var t=JSON.parse(a.data).data[0].results[0].idCardInfo;dd.navigateTo({url:\"../ocr/ocr?type=front&src=\"+e.data.src+\"&name=\"+t.name+\"&sex=\"+t.sex+\"&nationality=\"+t.nationality+\"&birth=\"+t.birth+\"&address=\"+t.address+\"&number=\"+t.number})},fail:function(e){}})}})},uploadSelfBackImage:function(){var e=this;dd.chooseImage({sourceType:[\"camera\",\"album\"],count:1,success:function(a){dd.showLoading({content:\"OCR\\u626b\\u63cf\\u4e2d...\"}),e.setData({src:a.filePaths[0]});var t=a.filePaths&&a.filePaths[0]||a.apFilePaths&&a.apFilePaths[0];console.log(t),dd.uploadFile({url:getApp().data.ip+\"/upload/cardOcr?cardFace=id-card-back\",fileType:\"image\",fileName:\"file\",filePath:t,success:function(a){dd.hideLoading();var t=JSON.parse(a.data).data[0].results[0].idCardInfo;console.log(t),e.setData({authority:t.authority,effective:t.startDate+\"\\u5230\"+t.endDate}),dd.navigateTo({url:\"../ocr/ocr?type=back&src=\"+e.data.src+\"&authority=\"+t.authority+\"&date=\"+e.data.effective})},fail:function(e){}})}})},uploadImageList:function(){dd.chooseImage({sourceType:[\"camera\",\"album\"],count:5,success:function(e){e.filePaths.forEach(function(e){console.log(e),dd.uploadFile({url:getApp().data.ip+\"/upload/cardOcr\",fileType:\"image\",fileName:\"file\",filePath:e,success:function(e){console.log(e)},fail:function(e){console.log(e)}})}),dd.navigateTo({url:\"../form/form\"})}})},uploadVideo:function(){dd.chooseVideo({sourceType:[\"album\",\"camera\"],maxDuration:60,success:function(e){console.log(item),dd.uploadFile({url:getApp().data.ip+\"/upload/cardOcr\",fileType:\"video\",fileName:\"file\",filePath:e.filePath})}})},navToService:function(){dd.navigateTo({url:\"../service/service\"})},navToSelf:function(){dd.navigateTo({url:\"../self/self\"})}})},function(e,a,t){\"use strict\";$global.currentPageConfig={pagePath:\"pages/service/service\",usingComponents:{}},Page({data:{showView:!0,disabled:!1,idCardFrontSrc:\"\",idCardBackSrc:\"\",selfImageSrc:\"\",business_name:\"\",business_type:\"\",business_address:\"\",business_salary:\"\",business_time:\"\",business_term:\"\",business_scope:\"\",name:\"\",sex:\"\",nationality:\"\",birth:\"\",number:\"\",address:\"\",authority:\"\",date:\"\",ssim:\"\",userid:\"\",record_id:\"\",mediaList:[{type:\"image\",src:\"/image/main/mediaAddImage.png\"}],arrayExamine:[],arrIndex:0,videoSrc:\"\"},scrollToTop:function(e){this.setData({scrollTop:0})},tap:function(e){for(var a=0;a<order.length;++a)if(order[a]===this.data.toView){var t=(a+1)%order.length;this.setData({toView:order[t],scrollTop:200*t});break}},tapMove:function(){this.setData({scrollTop:this.data.scrollTop+10})},onPullDownRefresh:function(){this.onReady(),dd.stopPullDownRefresh()},onLoad:function(e){var a=this;this.reset();dd.httpRequest({url:getApp().data.ip+\"/check/allChecker\",method:\"POST\",headers:{\"content-type\":\"application/json;charset=utf-8\"},success:function(e){var t=new Array,s=new Object;s.id=\"0\",s.checker_id=\"\",s.name=\"\\u65e0\",t.push(s);var i=1;e.data.forEach(function(e){var a=new Object;a.id=i,a.checker_id=e.checker_id,a.name=e.realname,t.push(a),i++}),a.setData({arrayExamine:t})}}),\"edit\"==e.param&&dd.httpRequest({url:getApp().data.ip+\"/center/recordDetail?recordId=\"+e.id,method:\"GET\",headers:{\"content-type\":\"application/json;charset=utf-8\"},success:function(t){console.log(\"state:  \"+t.data.data.record_state),console.log(t);for(var s=a,i=0;i<s.data.arrayExamine.length;i++)t.data.data.check_id==s.data.arrayExamine[i].checker_id&&s.setData({arrIndex:i});var r=new Array,n=new Object;\"1\"==t.data.data.record_state?a.setData({disabled:!0}):(n.type=\"image\",n.src=\"/image/main/mediaAddImage.png\",r.push(n)),t.data.data.mediaList.forEach(function(e){r.push(e)}),console.log(r),s.setData({userid:e.userid,business_name:t.data.data.business_name,business_type:t.data.data.business_type,business_address:t.data.data.business_address,business_salary:t.data.data.business_salary,business_time:t.data.data.business_time,business_term:t.data.data.business_term,business_scope:t.data.data.business_scope,name:t.data.data.idcard_name,sex:t.data.data.idcard_sex,nationality:t.data.data.idcard_nationality,birth:t.data.data.idcard_birth,number:t.data.data.idcard_number,address:t.data.data.idcard_address,authority:t.data.data.idcard_authority,date:t.data.data.idcard_date,idCardFrontSrc:t.data.data.idcard_front_path,idCardBackSrc:t.data.data.idCardBackSrc,ssim:t.data.data.people_card_core_first,mediaList:r,record_id:t.data.data.record_id})},fail:function(e){console.log(e)}})},reset:function(){this.setData({showView:!0,disabled:!1,idCardFrontSrc:\"\",idCardBackSrc:\"\",business_name:\"\",business_type:\"\",business_address:\"\",business_salary:\"\",business_time:\"\",business_term:\"\",business_scope:\"\",name:\"\",sex:\"\",nationality:\"\",birth:\"\",number:\"\",address:\"\",authority:\"\",date:\"\",ssim:\"\",mediaList:[{type:\"image\",src:\"/image/main/mediaAddImage.png\"}],arrayExamine:[],arrIndex:0})},previewImage:function(e){var a=new Array;this.data.mediaList.forEach(function(e){\"image\"==e.type&&a.push(e.src)}),dd.previewImage({current:1,urls:a})},playVideo:function(e){this.setData({videoSrc:e.target.dataset.index})},hideVideo:function(){this.setData({videoSrc:\"\"})},actionSheetTap:function(){var e=this;dd.showActionSheet({title:\"\\u9009\\u62e9\",cancelButtonText:\"\\u53d6\\u6d88\",items:[\"\\u4e0a\\u4f20\\u56fe\\u7247\",\"\\u4e0a\\u4f20\\u89c6\\u9891\"],success:function(a){var t=a.index;0==t&&e.uploadOtherImageList(),1==t&&e.uploadVideo()}})},idCardOcr:function(){var e=this;dd.showActionSheet({title:\"\\u9009\\u62e9\",cancelButtonText:\"\\u53d6\\u6d88\",items:[\"\\u8eab\\u4efd\\u8bc1\\u6b63\\u9762\",\"\\u8eab\\u4efd\\u8bc1\\u53cd\\u9762\"],success:function(a){var t=a.index;0==t&&e.uploadSelfImage(),1==t&&e.uploadSelfBackImage()}})},chooseImage:function(e){var a=this;dd.chooseImage({sourceType:[\"camera\",\"album\"],count:1,success:function(t){if(t&&t.filePaths)switch(e.currentTarget.dataset.name){case\"marketImageSrc\":a.setData({marketImageSrc:t.filePaths[0]});break;case\"groupImageSrc\":a.setData({groupImageSrc:t.filePaths[0]});break;case\"taxationImageSrc\":a.setData({taxationImageSrc:t.filePaths[0]})}},fail:function(){}})},uploadSelfImage:function(){var e=this;dd.chooseImage({sourceType:[\"camera\",\"album\"],count:1,success:function(a){var t=a.filePaths&&a.filePaths[0]||a.apFilePaths&&a.apFilePaths[0];dd.showLoading({content:\"OCR\\u626b\\u63cf\\u4e2d...\"}),e.setData({ssim:\"\"}),setTimeout(function(){dd.hideLoading()},1e3),dd.uploadFile({url:getApp().data.ip+\"/upload/cardOcr?cardFace=id-card-front\",fileType:\"image\",fileName:\"file\",filePath:t,success:function(a){dd.hideLoading();var t=JSON.parse(a.data);e.setData({idCardFrontSrc:t.data[2]});var s=t.data[0].results[0].idCardInfo;e.setData({name:s.name,sex:s.sex,nationality:s.nationality,birth:s.birth,address:s.address,number:s.number})},fail:function(e){}})}})},uploadSelfBackImage:function(){var e=this;dd.chooseImage({sourceType:[\"camera\",\"album\"],count:1,success:function(a){e.setData({selfBackImageSrc:a.filePaths[0]});var t=a.filePaths&&a.filePaths[0]||a.apFilePaths&&a.apFilePaths[0];dd.showLoading({content:\"OCR\\u626b\\u63cf\\u4e2d...\"}),setTimeout(function(){dd.hideLoading()},1e3),dd.uploadFile({url:getApp().data.ip+\"/upload/cardOcr?cardFace=id-card-back\",fileType:\"image\",fileName:\"file\",filePath:t,success:function(a){dd.hideLoading();var t=JSON.parse(a.data);e.setData({idCardBackSrc:t.data[1]});var s=t.data[0].results[0].idCardInfo;e.setData({authority:s.authority,date:s.startDate+\"\\u5230\"+s.endDate})},fail:function(e){}})}})},testOneSelf:function(){var e=this,a=this;\"\"!=a.data.idCardFrontSrc?dd.chooseImage({sourceType:[\"camera\"],count:1,success:function(t){dd.showLoading({content:\"\\u4eba\\u8bc1\\u6bd4\\u5bf9\\u4e2d...\"});var s=t.filePaths&&t.filePaths[0]||t.apFilePaths&&t.apFilePaths[0];dd.uploadFile({url:getApp().data.ip+\"/upload/saveImage\",fileType:\"image\",fileName:\"file\",filePath:s,formData:{idNumber:a.data.number,imageName:\"selfImage.png\"},success:function(t){var s=JSON.parse(t.data);console.log(s),console.log(\"\\u8ba4\\u8bc1\\u5bf9\\u6bd4\\u4e0a\\u4f20\\u56fe\\u7247\\u6210\\u529f\"),e.setData({selfImageSrc:s.data.src}),setTimeout(function(){dd.hideLoading()},1e3),console.log(a.data.idCardFrontSrc,a.data.selfImageSrc),dd.httpRequest({url:getApp().data.ip+\"/center/AipFaceApp?image_url_1=\"+a.data.idCardFrontSrc+\"&image_url_2=\"+a.data.selfImageSrc,method:\"GET\",headers:{\"content-type\":\"application/json;charset=utf-8\"},success:function(e){console.log(e),dd.hideLoading();var t=e.data.confidence.toFixed(2);a.setData({ssim:t})}})}})}}):dd.alert({title:\"\\u8bf7\\u7b49\\u5f85\\u8eab\\u4efd\\u8bc1OCR\"})},uploadOtherImageList:function(){var e=this;dd.chooseImage({sourceType:[\"camera\",\"album\"],count:10,success:function(a){for(var t=e,s=0;s<a.filePaths.length;s++)t.uploadImageList(\"image\"+s+\".png\",t.data.number,a.filePaths[s])}})},uploadVideo:function(){var e=this;dd.chooseVideo({sourceType:[\"album\",\"camera\"],maxDuration:600,success:function(a){var t=e;t.uploadVideoList(\"video.mp4\",t.data.number,a.filePath)}})},bindKeyInput:function(e){switch(e.target.dataset.index){case\"business_name\":this.setData({business_name:e.detail.value});break;case\"business_type\":this.setData({business_type:e.detail.value});break;case\"business_address\":this.setData({business_address:e.detail.value});break;case\"business_salary\":this.setData({business_salary:e.detail.value});break;case\"business_time\":this.setData({business_time:e.detail.value});break;case\"business_term\":this.setData({business_term:e.detail.value});break;case\"business_scope\":this.setData({business_scope:e.detail.value});break;case\"name\":this.setData({name:e.detail.value});break;case\"sex\":this.setData({sex:e.detail.value});break;case\"nationality\":this.setData({nationality:e.detail.value});break;case\"birth\":this.setData({birth:e.detail.value});break;case\"number\":this.setData({number:e.detail.value});break;case\"address\":this.setData({address:e.detail.value});break;case\"authority\":this.setData({authority:e.detail.value});break;case\"date\":this.setData({date:e.detail.value})}},uploadFile:function(e){var a=this;this.data;if(this.testForm()){var t=void 0;this.data.arrayExamine.forEach(function(e){e.id==a.data.arrIndex&&(t=e.checker_id)}),\"\"==t&&(t=-1),this.uploadTest(t,e.target.dataset.index),console.log(\"\\u8868\\u5355\\u6587\\u5b57\\u4e0a\\u4f20\\u6210\\u529f\"),dd.alert({title:\"\\u4e0a\\u4f20\\u6210\\u529f\"}),dd.navigateTo({url:\"../index/index\"})}},showToast:function(e){dd.showToast({content:e})},testForm:function(){var e=this.data;return\"\"==e.name?(this.showToast(\"\\u59d3\\u540d\\u4e3a\\u7a7a\"),!1):\"\"==e.sex?(this.showToast(\"\\u6027\\u522b\\u4e3a\\u7a7a\"),!1):\"\"==e.nationality?(this.showToast(\"\\u6c11\\u65cf\\u4e3a\\u7a7a\"),!1):\"\"==e.birth?(this.showToast(\"\\u51fa\\u751f\\u65e5\\u671f\\u4e3a\\u7a7a\"),!1):\"\"==e.number?(this.showToast(\"\\u8eab\\u4efd\\u8bc1\\u53f7\\u4e3a\\u7a7a\"),!1):\"\"==e.address?(this.showToast(\"\\u5730\\u5740\\u4e3a\\u7a7a\"),!1):\"\"==e.authority?(this.showToast(\"\\u7b7e\\u53d1\\u673a\\u5173\\u4e3a\\u7a7a\"),!1):\"\"==e.date?(this.showToast(\"\\u6709\\u6548\\u671f\\u9650\\u4e3a\\u7a7a\"),!1):\"\"!=e.ssim||(this.showToast(\"\\u4eba\\u8bc1\\u5bf9\\u6bd4\\u4e3a\\u7a7a\"),!1)},uploadTest:function(e,a){var t=new Object;t.idcard_name=this.data.name,t.idcard_sex=this.data.sex,t.idcard_nationality=this.data.nationality,t.idcard_birth=this.data.birth,t.idcard_number=this.data.number,t.idcard_address=this.data.address,t.idcard_authority=this.data.authority,t.idcard_date=this.data.date,t.idcard_front_path=this.data.idCardFrontSrc,t.idcard_back_path=this.data.idCardBackSrc;var s=new Object;s.business_name=this.data.business_name,s.business_type=this.data.business_type,s.business_address=this.data.business_address,s.business_salary=this.data.business_salary,s.business_time=this.data.business_time,s.business_term=this.data.business_term,s.business_scope=this.data.business_scope;for(var i=new Array,r=1;r<this.data.mediaList.length;r++)i.push(this.data.mediaList[r].src);var n=new Object;n.checker_id=e,n.record_state=a,n.recordKey=this.data.record_id,n.people_card_core_first=this.data.ssim,dd.httpRequest({url:getApp().data.ip+\"/upload/saveFormApp\",method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded;charset=UTF-8\"},data:{businessUser:JSON.stringify(t),business:JSON.stringify(s),list:JSON.stringify(i),recordParam:JSON.stringify(n)},dataType:\"json\",success:function(e){},fail:function(e){}})},uploadVideoList:function(e,a,t){dd.onSocketClose(function(e){console.log(\"WebSocket \\u5df2\\u5173\\u95ed\\uff01\")});var s=getApp().data.ip+\"/upload/saveVideo\";dd.connectSocket({url:s}),dd.onSocketOpen(function(e){dd.alert({content:\"\\u8fde\\u63a5\\u5df2\\u6253\\u5f00\\uff01\"})}),dd.onSocketError(function(e){dd.alert(\"WebSocket \\u8fde\\u63a5\\u6253\\u5f00\\u5931\\u8d25\\uff0c\\u8bf7\\u68c0\\u67e5\\uff01\"+e)}),dd.onSocketMessage(function(e){dd.hideLoading();var a=new Object;a.fileType=\"video\",a.fileName=\"file\",a.filePath=t;JSON.parse(a)})},uploadImageList:function(e,a,t){var s=this;dd.showLoading({content:\"\\u4e0a\\u4f20\\u56fe\\u7247\\u4e2d...\"}),dd.uploadFile({url:getApp().data.ip+\"/upload/saveImage\",fileType:\"image\",fileName:\"file\",filePath:t,formData:{idNumber:a,imageName:e},success:function(e){dd.hideLoading();var a=JSON.parse(e.data),t=s.data.mediaList,i=new Object;i.type=a.data.type,i.src=a.data.src,t.push(i),console.log(t),s.setData({mediaList:t})},fail:function(e){dd.hideLoading()}})},bindObjPickerChange:function(e){this.setData({arrIndex:e.detail.value})}})},function(e,a,t){\"use strict\";$global.currentPageConfig={pagePath:\"pages/query/query\",usingComponents:{}},Page({data:{id:\"\",name:\"\\u9a6c\\u4e91\",idCard:\"130927111122223333\",area:\"XXXXXXXX\\u7701XXXXXXXXX\\u5e02XX\\u533aXXXXXXXXX\\u53f7\",company:\"XX\\u7701XX\\u5e02XX\\u53bf\\u516c\\u5b89\\u5c40\",validTime:\"2013\\u5e7410\\u670827\\u65e5\\u2014\\u20142023\\u5e7410\\u670827\\u65e5\",business_name:\"Tencent\",business_address:\"\\u6df1\\u5733\",business_number:\"123123456849616352\",business_salary:\"1000000000\",business_date:\"1998\\u5e7411\\u6708\",array:[{mode:\"aspectFit\",text:\"\\u8eab\\u4efd\\u8bc1\\u6b63\\u9762\",src:\"/image/ant.png\"},{mode:\"aspectFit\",text:\"\\u8eab\\u4efd\\u8bc1\\u53cd\\u9762\",src:\"/image/ant.png\"},{mode:\"aspectFit\",text:\"\\u8425\\u4e1a\\u6267\\u7167\",src:\"/image/ant.png\"},{mode:\"aspectFill\",text:\"\\u7ec4\\u7ec7\\u673a\\u6784\\u4ee3\\u7801\\u8bc1\",src:\"/image/ant.png\"},{mode:\"aspectFit\",text:\"\\u7a0e\\u52a1\\u767b\\u8bb0\\u8bc1\\u6b63\\u672c\",src:\"/image/ant.png\"}],record_state:\"2\",failReason:\"\\u8eab\\u4efd\\u8bc1\\u62cd\\u53cd\\u4e86\"},onLoad:function(e){console.info(e),this.setData({id:e.id})},onReady:function(){var e=this;console.log(this.data.id),dd.httpRequest({url:getApp().data.ip+\"/center/recordDetail?recordId=\"+this.data.id,method:\"GET\",headers:{\"content-type\":\"application/json;charset=utf-8\"},success:function(a){console.log(a);var t=new Array;a.data.data.imageList.forEach(function(e){var a=new Object;a.mode=\"aspectFit\",a.text=e.imageName,a.src=e.imageSrc,t.push(a)}),console.log(t),e.setData({name:a.data.data.idcard_name,idCard:a.data.data.idcard_number,area:a.data.data.idcard_address,company:a.data.data.company,validTime:a.data.data.validTime,business_name:a.data.data.business_name,business_address:a.data.data.business_address,business_number:a.data.data.business_code,business_salary:a.data.data.business_salary,business_date:a.data.data.business_time,array:t,record_state:a.data.data.record_state})},fail:function(e){console.log(e)}})},previewImage:function(e){var a;switch(console.log(e.currentTarget.dataset.name),e.currentTarget.dataset.name){case\"scaleToFill\":a=this.data.array[0].src;break;case\"aspectFit\":a=this.data.array[1].src;break;case\"aspectFill\":a=this.data.array[2].src;break;case\"aspectFit\":a=this.data.array[3].src}dd.previewImage({current:1,urls:[\"\"].concat(a)})},updateToService:function(){dd.navigateTo({url:\"../service/service?param=edit&id=\"+this.data.id})}})},function(e,a,t){\"use strict\";$global.currentPageConfig={pagePath:\"pages/self/self\",usingComponents:{}},Page({data:{onItemTap:\"handleListItemTap\",header:\"\\u4efb\\u52a1\\u5217\\u8868\",num:\"\",bus_name:\"\",data:[]},onReady:function(){var e=this;dd.httpRequest({url:getApp().data.ip+\"/center/queryRecord\",method:\"GET\",headers:{\"content-type\":\"application/json;charset=utf-8\"},dataType:\"json\",success:function(a){console.log(a),e.setData({data:a.data})},fail:function(e){console.log(e)}})},handleListItemTap:function(e){console.log(e),dd.navigateTo({url:\"../service/service?param=edit&id=\"+e.currentTarget.dataset.index})},translateList:function(e){e.forEach(function(e){})},bindKeyInput:function(e){switch(e.target.dataset.index){case\"num\":this.setData({num:e.detail.value});break;case\"bus_name\":this.setData({bus_name:e.detail.value})}},queryByCondition:function(){var e=this,a=encodeURIComponent(this.data.bus_name);console.log(\"busName:\"+a),dd.httpRequest({url:getApp().data.ip+\"/center/queryRecord?identifyNo=\"+this.data.num+\"&companyName=\"+a,method:\"GET\",success:function(a){console.log(a),e.setData({data:a.data})},fail:function(e){console.log(e)}})}})},function(e,a,t){\"use strict\";$global.currentPageConfig={pagePath:\"pages/ocr/ocr\",usingComponents:{}},Page({data:{showView:!0,copyText:\"\",type:\"front\",src:\"/image/main/ocr.png\",name:\"\\u8881\\u5d07\\u7115\",sex:\"\\u7537\",nationality:\"\\u6c49\",birth:\"\\u672a\\u77e5\",number:\"\\u6ca1\\u6709\",address:\"\\uff1f\",authority:\"\\u4e5f\\u6ca1\\u6709\",date:\"\\u90fd\\u6ca1\\u6709\"},scrollToTop:function(e){console.log(e),this.setData({scrollTop:0})},tap:function(e){for(var a=0;a<order.length;++a)if(order[a]===this.data.toView){var t=(a+1)%order.length;this.setData({toView:order[t],scrollTop:200*t});break}},tapMove:function(){this.setData({scrollTop:this.data.scrollTop+10})},onLoad:function(e){console.info(e),\"front\"==e.type&&this.setData({type:e.type,src:e.src,name:e.name,sex:e.sex,nationality:e.nationality,birth:e.birth,address:e.address,number:e.number}),\"back\"==e.type&&this.setData({type:e.type,src:e.src,authority:e.authority,date:e.date})},copyOcr:function(){console.log(this.data.type);var e=void 0;\"front\"==this.data.type&&(e=\"\\u59d3\\u540d \"+this.data.name+\"\\n\\u6027\\u522b \"+this.data.sex+\"\\n\\u6c11\\u65cf \"+this.data.nationality+\"\\n\\u51fa\\u751f\\u65e5\\u671f \"+this.data.birth+\"\\n\\u5730\\u5740 \"+this.data.address+\"\\n\\u8eab\\u4efd\\u8bc1\\u53f7 \"+this.data.number),\"back\"==this.data.type&&(e=\"\\u7b7e\\u53d1\\u673a\\u5173 \"+this.data.authority+\"\\n\\u6709\\u6548\\u671f\\u9650 \"+this.data.date,console.log(e)),this.setData({copyText:e})},hideCopy:function(){this.setData({copyText:\"\"})}})},function(e,a,t){\"use strict\";$global.currentPageConfig={pagePath:\"pages/demo/demo\",usingComponents:{}},Page({data:{target:\"http://xxxxx/xx\",chunkSize:\"2048000\",fileParameterName:\"file\",maxChunkRetries:3,testChunks:!0},onLoad:function(){this.ctx=dd.createCameraContext()},takePhoto:function(){var e=this;this.ctx.takePhoto({quality:\"high\",success:function(a){e.setData({src:a.tempImagePath})}})},startRecord:function(){this.ctx.startRecord({success:function(e){console.log(\"startRecord\")}})},stopRecord:function(){var e=this;this.ctx.stopRecord({success:function(a){e.setData({src:a.tempThumbPath,videoSrc:a.tempVideoPath})}})},error:function(e){console.log(e.detail)}})},function(e,a,t){\"use strict\";(function(e){(\"undefined\"!==typeof e?e:self).appXAppJson={app:{$homepage:\"pages/index/index\"}}}).call(this,t(10))},function(e,a){var t;t=function(){return this}();try{t=t||new Function(\"return this\")()}catch(e){\"object\"===typeof window&&(t=window)}e.exports=t},function(e,a,t){\"use strict\";self.Map&&self.Set||importScripts(\"https://gw.alipayobjects.com/as/g/appx_release/deps/1.0.0/es6-set-map.js\"),importScripts(\"https://appx/af-appx.worker.min.js\"),AFAppX.registerApp&&AFAppX.registerApp({appJSON:appXAppJson})}]);","extractedComments":[]}